{"version":3,"file":"checkin.js","sources":["../../src/checkin.ts"],"sourcesContent":["import type {\n  CheckInEvelope,\n  CheckInItem,\n  DsnComponents,\n  DynamicSamplingContext,\n  SdkMetadata,\n  SerializedCheckIn,\n} from '@sentry/types';\nimport { createEnvelope, dropUndefinedKeys, dsnToString } from '@sentry/utils';\n\n/**\n * Create envelope from check in item.\n */\nexport function createCheckInEnvelope(\n  checkIn: SerializedCheckIn,\n  dynamicSamplingContext?: Partial<DynamicSamplingContext>,\n  metadata?: SdkMetadata,\n  tunnel?: string,\n  dsn?: DsnComponents,\n): CheckInEvelope {\n  const headers: CheckInEvelope[0] = {\n    sent_at: new Date().toISOString(),\n  };\n\n  if (metadata && metadata.sdk) {\n    headers.sdk = {\n      name: metadata.sdk.name,\n      version: metadata.sdk.version,\n    };\n  }\n\n  if (!!tunnel && !!dsn) {\n    headers.dsn = dsnToString(dsn);\n  }\n\n  if (dynamicSamplingContext) {\n    headers.trace = dropUndefinedKeys(dynamicSamplingContext) as DynamicSamplingContext;\n  }\n\n  const item = createCheckInEnvelopeItem(checkIn);\n  return createEnvelope<CheckInEvelope>(headers, [item]);\n}\n\nfunction createCheckInEnvelopeItem(checkIn: SerializedCheckIn): CheckInItem {\n  const checkInHeaders: CheckInItem[0] = {\n    type: 'check_in',\n  };\n  return [checkInHeaders, checkIn];\n}\n"],"names":[],"mappings":";;AAUA;AACA;AACA;AACA,SAAA,qBAAA;AACA,EAAA,OAAA;AACA,EAAA,sBAAA;AACA,EAAA,QAAA;AACA,EAAA,MAAA;AACA,EAAA,GAAA;AACA,EAAA;AACA,EAAA,MAAA,OAAA,GAAA;AACA,IAAA,OAAA,EAAA,IAAA,IAAA,EAAA,CAAA,WAAA,EAAA;AACA,GAAA,CAAA;AACA;AACA,EAAA,IAAA,QAAA,IAAA,QAAA,CAAA,GAAA,EAAA;AACA,IAAA,OAAA,CAAA,GAAA,GAAA;AACA,MAAA,IAAA,EAAA,QAAA,CAAA,GAAA,CAAA,IAAA;AACA,MAAA,OAAA,EAAA,QAAA,CAAA,GAAA,CAAA,OAAA;AACA,KAAA,CAAA;AACA,GAAA;AACA;AACA,EAAA,IAAA,CAAA,CAAA,MAAA,IAAA,CAAA,CAAA,GAAA,EAAA;AACA,IAAA,OAAA,CAAA,GAAA,GAAA,WAAA,CAAA,GAAA,CAAA,CAAA;AACA,GAAA;AACA;AACA,EAAA,IAAA,sBAAA,EAAA;AACA,IAAA,OAAA,CAAA,KAAA,GAAA,iBAAA,CAAA,sBAAA,CAAA,EAAA;AACA,GAAA;AACA;AACA,EAAA,MAAA,IAAA,GAAA,yBAAA,CAAA,OAAA,CAAA,CAAA;AACA,EAAA,OAAA,cAAA,CAAA,OAAA,EAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,CAAA;AACA;AACA,SAAA,yBAAA,CAAA,OAAA,EAAA;AACA,EAAA,MAAA,cAAA,GAAA;AACA,IAAA,IAAA,EAAA,UAAA;AACA,GAAA,CAAA;AACA,EAAA,OAAA,CAAA,cAAA,EAAA,OAAA,CAAA,CAAA;AACA;;;;"}